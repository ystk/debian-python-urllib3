From 1742538d57865e61125c6c12a755b5db41636fe7 Mon Sep 17 00:00:00 2001
From: "Seth M. Larson" <SethMichaelLarson@users.noreply.github.com>
Date: Tue, 27 Mar 2018 14:40:38 -0500
Subject: [PATCH] Add a comment about short-circuiting is_same_host

---
 urllib3/poolmanager.py |    2 ++
 1 file changed, 2 insertions(+)

--- a/urllib3/poolmanager.py
+++ b/urllib3/poolmanager.py
@@ -169,6 +169,8 @@ class PoolManager(RequestMethods):
             retries = Retry.from_int(retries, redirect=redirect)
 
         # Strip headers marked as unsafe to forward to the redirected location.
+        # Check remove_headers_on_redirect to avoid a potential network call within
+        # conn.is_same_host() which may use socket.gethostbyname() in the future.
         if (retries.remove_headers_on_redirect
                 and not conn.is_same_host(redirect_location)):
             for header in retries.remove_headers_on_redirect:
